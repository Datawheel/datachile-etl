"Región del Biob\u00edo" = "B\u00edob\u00edo",
"Regi\u00f3n de Los Lagos" = "Los Lagos",
"Regi\u00f3n de Magallanes y Antártica Chilena" = "Magallanes",
"Regi\u00f3n de Los R\u00edos" = "Los R\u00edos"))
nesi_individuals_with_grants_2012$REGION <- revalue(nesi_individuals_with_grants_2012$REGION, c("Regi\u00f3n de Tarapac\u00e1" = "Tarapac\u00e1",
"Regi\u00f3n de Atacama" = "Atacama",
"Regi\u00f3n de Valpara\u00edso" = "Valpara\u00edso",
"Regi\u00f3n del Maule" = "Maule",
"Regi\u00f3n de La Araucan\u00eda" = "Araucan\u00eda",
"Regi\u00f3n de Ays\u00e9n del Gral. Carlos Ibáñez del Campo" = "Ays\u00e9n",
"Regi\u00f3n Metropolitana" = "Metropolitana",
"Regi\u00f3n de Arica y Parinacota" = "Arica y Parinacota",
"Regi\u00f3n de Antofagasta" = "Antofagasta",
"Regi\u00f3n de Coquimbo" = "Coquimbo",
"Regi\u00f3n del Libertador Gral. Bernardo O'Higgins" = "O\u0027Higgins",
"Región del Biob\u00edo" = "B\u00edob\u00edo",
"Regi\u00f3n de Los Lagos" = "Los Lagos",
"Regi\u00f3n de Magallanes y Antártica Chilena" = "Magallanes",
"Regi\u00f3n de Los R\u00edos" = "Los R\u00edos"))
levels(nesi_individuals_with_grants_2012$REGION)
nesi_individuals_with_grants_2012$REGION <- revalue(nesi_individuals_with_grants_2012$REGION, c("Regi\u00f3n de Tarapac\u00e1" = "Tarapac\u00e1",
"Regi\u00f3n de Atacama" = "Atacama",
"Regi\u00f3n de Valpara\u00edso" = "Valpara\u00edso",
"Regi\u00f3n del Maule" = "Maule",
"Regi\u00f3n de La Araucan\u00eda" = "Araucan\u00eda",
"Regi\u00f3n de Ays\u00e9n del Gral. Carlos Ibañez del Campo" = "Ays\u00e9n",
"Regi\u00f3n Metropolitana" = "Metropolitana",
"Regi\u00f3n de Arica y Parinacota" = "Arica y Parinacota",
"Regi\u00f3n de Antofagasta" = "Antofagasta",
"Regi\u00f3n de Coquimbo" = "Coquimbo",
"Regi\u00f3n del Libertador Gral. Bernardo O'Higgins" = "O\u0027Higgins",
"Región del Biob\u00edo" = "B\u00edob\u00edo",
"Regi\u00f3n de Los Lagos" = "Los Lagos",
"Regi\u00f3n de Magallanes y Antártica Chilena" = "Magallanes",
"Regi\u00f3n de Los R\u00edos" = "Los R\u00edos"))
nesi_individuals_with_grants_2011$REGION <- revalue(nesi_individuals_with_grants_2011$REGION, c("Regi\u00f3n de Tarapac\u00e1" = "Tarapac\u00e1",
"Regi\u00f3n de Atacama" = "Atacama",
"Regi\u00f3n de Valpara\u00edso" = "Valpara\u00edso",
"Regi\u00f3n del Maule" = "Maule",
"Regi\u00f3n de La Araucan\u00eda" = "Araucan\u00eda",
"Regi\u00f3n de Ays\u00e9n del Gral. Carlos Ibáñez del Campo" = "Ays\u00e9n",
"Regi\u00f3n Metropolitana" = "Metropolitana",
"Regi\u00f3n de Arica y Parinacota" = "Arica y Parinacota",
"Regi\u00f3n de Antofagasta" = "Antofagasta",
"Regi\u00f3n de Coquimbo" = "Coquimbo",
"Regi\u00f3n del Libertador Gral. Bernardo O'Higgins" = "O\u0027Higgins",
"Región del Biob\u00edo" = "B\u00edob\u00edo",
"Regi\u00f3n de Los Lagos" = "Los Lagos",
"Regi\u00f3n de Magallanes y Antártica Chilena" = "Magallanes",
"Regi\u00f3n de Los R\u00edos" = "Los R\u00edos"))
levels(nesi_individuals_with_grants_2011$REGION)
nesi_individuals_with_grants_2011$REGION <- revalue(nesi_individuals_with_grants_2011$REGION, c("Regi\u00f3n de Tarapac\u00e1" = "Tarapac\u00e1",
"Regi\u00f3n de Atacama" = "Atacama",
"Regi\u00f3n de Valpara\u00edso" = "Valpara\u00edso",
"Regi\u00f3n del Maule" = "Maule",
"Regi\u00f3n de La Araucan\u00eda" = "Araucan\u00eda",
"Regi\u00f3n De Ais\u00e9n del Gral. Carlos Ibañez del Campo" = "Ays\u00e9n",
"Regi\u00f3n Metropolitana" = "Metropolitana",
"Regi\u00f3n de Arica y Parinacota" = "Arica y Parinacota",
"Regi\u00f3n de Antofagasta" = "Antofagasta",
"Regi\u00f3n de Coquimbo" = "Coquimbo",
"Regi\u00f3n del Libertador Gral. Bernardo O'higgins" = "O\u0027Higgins",
"Región del Bio Bb\u00edo" = "B\u00edob\u00edo",
"Regi\u00f3n de los Lagos" = "Los Lagos",
"Regi\u00f3n de Magallanes y Antártica Chilena" = "Magallanes",
"Regi\u00f3n de Los R\u00edos" = "Los R\u00edos"))
nesi_individuals_with_grants_2010$REGION <- revalue(nesi_individuals_with_grants_2010$REGION, c("Regi\u00f3n de Tarapac\u00e1" = "Tarapac\u00e1",
"Regi\u00f3n de Atacama" = "Atacama",
"Regi\u00f3n de Valpara\u00edso" = "Valpara\u00edso",
"Regi\u00f3n del Maule" = "Maule",
"Regi\u00f3n de La Araucan\u00eda" = "Araucan\u00eda",
"Regi\u00f3n de Ays\u00e9n del Gral. Carlos Ibáñez del Campo" = "Ays\u00e9n",
"Regi\u00f3n Metropolitana" = "Metropolitana",
"Regi\u00f3n de Arica y Parinacota" = "Arica y Parinacota",
"Regi\u00f3n de Antofagasta" = "Antofagasta",
"Regi\u00f3n de Coquimbo" = "Coquimbo",
"Regi\u00f3n del Libertador Gral. Bernardo O'Higgins" = "O\u0027Higgins",
"Región del Biob\u00edo" = "B\u00edob\u00edo",
"Regi\u00f3n de Los Lagos" = "Los Lagos",
"Regi\u00f3n de Magallanes y Antártica Chilena" = "Magallanes",
"Regi\u00f3n de Los R\u00edos" = "Los R\u00edos"))
levels(nesi_individuals_with_grants_2010$REGION)
source("1_libraries.R")
source("2_load.R")
source("3_batch_load.R")
source("4_fix_region.R")
source("1_libraries.R")
source("2_load.R")
source("3_batch_load.R")
nesi_individuals_with_grants_2015$REGION <- revalue(nesi_individuals_with_grants_2015$REGION, c("Regi\u00f3n de Tarapac\u00e1" = "Tarapac\u00e1",
"Regi\u00f3n de Atacama" = "Atacama",
"Regi\u00f3n de Valpara\u00edso" = "Valpara\u00edso",
"Regi\u00f3n del Maule" = "Maule",
"Regi\u00f3n de La Araucan\u00eda" = "Araucan\u00eda",
"Regi\u00f3n de Ays\u00e9n del Gral. Carlos Ibáñez del Campo" = "Ays\u00e9n",
"Regi\u00f3n Metropolitana" = "Metropolitana",
"Regi\u00f3n de Arica y Parinacota" = "Arica y Parinacota",
"Regi\u00f3n de Antofagasta" = "Antofagasta",
"Regi\u00f3n de Coquimbo" = "Coquimbo",
"Regi\u00f3n del Libertador Gral. Bernardo O'Higgins" = "O\u0027Higgins",
"Región del Biob\u00edo" = "B\u00edob\u00edo",
"Regi\u00f3n de Los Lagos" = "Los Lagos",
"Regi\u00f3n de Magallanes y Antártica Chilena" = "Magallanes",
"Regi\u00f3n de Los R\u00edos" = "Los R\u00edos"))
nesi_individuals_with_grants_2014$REGION <- revalue(nesi_individuals_with_grants_2014$REGION, c("Regi\u00f3n de Tarapac\u00e1" = "Tarapac\u00e1",
"Regi\u00f3n de Atacama" = "Atacama",
"Regi\u00f3n de Valpara\u00edso" = "Valpara\u00edso",
"Regi\u00f3n del Maule" = "Maule",
"Regi\u00f3n de La Araucan\u00eda" = "Araucan\u00eda",
"Regi\u00f3n de Ays\u00e9n del Gral. Carlos Ibáñez del Campo" = "Ays\u00e9n",
"Regi\u00f3n Metropolitana" = "Metropolitana",
"Regi\u00f3n de Arica y Parinacota" = "Arica y Parinacota",
"Regi\u00f3n de Antofagasta" = "Antofagasta",
"Regi\u00f3n de Coquimbo" = "Coquimbo",
"Regi\u00f3n del Libertador Gral. Bernardo O'Higgins" = "O\u0027Higgins",
"Región del Biob\u00edo" = "B\u00edob\u00edo",
"Regi\u00f3n de Los Lagos" = "Los Lagos",
"Regi\u00f3n de Magallanes y Antártica Chilena" = "Magallanes",
"Regi\u00f3n de Los R\u00edos" = "Los R\u00edos"))
nesi_individuals_with_grants_2013$REGION <- revalue(nesi_individuals_with_grants_2013$REGION, c("Regi\u00f3n de Tarapac\u00e1" = "Tarapac\u00e1",
"Regi\u00f3n de Atacama" = "Atacama",
"Regi\u00f3n de Valpara\u00edso" = "Valpara\u00edso",
"Regi\u00f3n del Maule" = "Maule",
"Regi\u00f3n de La Araucan\u00eda" = "Araucan\u00eda",
"Regi\u00f3n de Ays\u00e9n del Gral. Carlos Ibáñez del Campo" = "Ays\u00e9n",
"Regi\u00f3n Metropolitana" = "Metropolitana",
"Regi\u00f3n de Arica y Parinacota" = "Arica y Parinacota",
"Regi\u00f3n de Antofagasta" = "Antofagasta",
"Regi\u00f3n de Coquimbo" = "Coquimbo",
"Regi\u00f3n del Libertador Gral. Bernardo O'Higgins" = "O\u0027Higgins",
"Región del Biob\u00edo" = "B\u00edob\u00edo",
"Regi\u00f3n de Los Lagos" = "Los Lagos",
"Regi\u00f3n de Magallanes y Antártica Chilena" = "Magallanes",
"Regi\u00f3n de Los R\u00edos" = "Los R\u00edos"))
nesi_individuals_with_grants_2012$REGION <- revalue(nesi_individuals_with_grants_2012$REGION, c("Regi\u00f3n de Tarapac\u00e1" = "Tarapac\u00e1",
"Regi\u00f3n de Atacama" = "Atacama",
"Regi\u00f3n de Valpara\u00edso" = "Valpara\u00edso",
"Regi\u00f3n del Maule" = "Maule",
"Regi\u00f3n de La Araucan\u00eda" = "Araucan\u00eda",
"Regi\u00f3n de Ays\u00e9n del Gral. Carlos Ibañez del Campo" = "Ays\u00e9n",
"Regi\u00f3n Metropolitana" = "Metropolitana",
"Regi\u00f3n de Arica y Parinacota" = "Arica y Parinacota",
"Regi\u00f3n de Antofagasta" = "Antofagasta",
"Regi\u00f3n de Coquimbo" = "Coquimbo",
"Regi\u00f3n del Libertador Gral. Bernardo O'Higgins" = "O\u0027Higgins",
"Región del Biob\u00edo" = "B\u00edob\u00edo",
"Regi\u00f3n de Los Lagos" = "Los Lagos",
"Regi\u00f3n de Magallanes y Antártica Chilena" = "Magallanes",
"Regi\u00f3n de Los R\u00edos" = "Los R\u00edos"))
nesi_individuals_with_grants_2011$REGION <- revalue(nesi_individuals_with_grants_2011$REGION, c("Regi\u00f3n de Tarapac\u00e1" = "Tarapac\u00e1",
"Regi\u00f3n de Atacama" = "Atacama",
"Regi\u00f3n de Valpara\u00edso" = "Valpara\u00edso",
"Regi\u00f3n del Maule" = "Maule",
"Regi\u00f3n de La Araucan\u00eda" = "Araucan\u00eda",
"Regi\u00f3n De Ais\u00e9n del Gral. Carlos Ibañez del Campo" = "Ays\u00e9n",
"Regi\u00f3n Metropolitana" = "Metropolitana",
"Regi\u00f3n de Arica y Parinacota" = "Arica y Parinacota",
"Regi\u00f3n de Antofagasta" = "Antofagasta",
"Regi\u00f3n de Coquimbo" = "Coquimbo",
"Regi\u00f3n del Libertador Gral. Bernardo O'higgins" = "O\u0027Higgins",
"Región del Bio Bb\u00edo" = "B\u00edob\u00edo",
"Regi\u00f3n de los Lagos" = "Los Lagos",
"Regi\u00f3n de Magallanes y Antártica Chilena" = "Magallanes",
"Regi\u00f3n de Los R\u00edos" = "Los R\u00edos"))
levels(nesi_individuals_with_grants_2011$REGION)
nesi_individuals_with_grants_2010$REGION <- revalue(nesi_individuals_with_grants_2010$REGION, c("Regi\u00f3n de Tarapac\u00e1" = "Tarapac\u00e1",
"Regi\u00f3n de Atacama" = "Atacama",
"Regi\u00f3n de Valpara\u00edso" = "Valpara\u00edso",
"Regi\u00f3n del Maule" = "Maule",
"Regi\u00f3n de La Araucan\u00eda" = "Araucan\u00eda",
"Regi\u00f3n de Ais\u00e9n del Gral. Carlos Ibañez del Campo" = "Ays\u00e9n",
"Regi\u00f3n Metropolitana" = "Metropolitana",
"Regi\u00f3n de Arica y Parinacota" = "Arica y Parinacota",
"Regi\u00f3n de Antofagasta" = "Antofagasta",
"Regi\u00f3n de Coquimbo" = "Coquimbo",
"Regi\u00f3n del Libertador Gral Bernardo O'higgins" = "O\u0027Higgins",
"Región del Biob\u00edo" = "B\u00edob\u00edo",
"Regi\u00f3n de Los Lagos" = "Los Lagos",
"Regi\u00f3n de Magallanes y Antártica Chilena" = "Magallanes",
"Regi\u00f3n de Los R\u00edos" = "Los R\u00edos"))
levels(nesi_individuals_with_grants_2010$REGION)
nesi_individuals_with_grants_2010$REGION <- revalue(nesi_individuals_with_grants_2010$REGION, c("Regi\u00f3n de Tarapac\u00e1" = "Tarapac\u00e1",
"Regi\u00f3n de Atacama" = "Atacama",
"Regi\u00f3n de Valparaiso" = "Valpara\u00edso",
"Regi\u00f3n del Maule" = "Maule",
"Regi\u00f3n de La Araucan\u00eda" = "Araucan\u00eda",
"Regi\u00f3n de Ais\u00e9n del Gral. Carlos Ibañez del Campo" = "Ays\u00e9n",
"Regi\u00f3n Metropolitana" = "Metropolitana",
"Regi\u00f3n de Arica y Parinacota" = "Arica y Parinacota",
"Regi\u00f3n de Antofagasta" = "Antofagasta",
"Regi\u00f3n de Coquimbo" = "Coquimbo",
"Regi\u00f3n del Libertador Gral Bernardo O'higgins" = "O\u0027Higgins",
"Región del Bio B\u00edo" = "B\u00edob\u00edo",
"Regi\u00f3n de Los Lagos" = "Los Lagos",
"Regi\u00f3n de Magallanes y Antártica Chilena" = "Magallanes",
"Regi\u00f3n de los R\u00edos" = "Los R\u00edos"))
source("1_libraries.R")
source("2_load.R")
source("3_batch_load.R")
nesi_individuals_with_grants_2010$REGION <- revalue(nesi_individuals_with_grants_2010$REGION, c("Regi\u00f3n de Tarapac\u00e1" = "Tarapac\u00e1",
"Regi\u00f3n de Atacama" = "Atacama",
"Regi\u00f3n de Valparaiso" = "Valpara\u00edso",
"Regi\u00f3n del Maule" = "Maule",
"Regi\u00f3n de La Araucan\u00eda" = "Araucan\u00eda",
"Regi\u00f3n de Ais\u00e9n del Gral. Carlos Ibañez del Campo" = "Ays\u00e9n",
"Regi\u00f3n Metropolitana" = "Metropolitana",
"Regi\u00f3n de Arica y Parinacota" = "Arica y Parinacota",
"Regi\u00f3n de Antofagasta" = "Antofagasta",
"Regi\u00f3n de Coquimbo" = "Coquimbo",
"Regi\u00f3n del Libertador Gral Bernardo O'higgins" = "O\u0027Higgins",
"Región del Bio B\u00edo" = "B\u00edob\u00edo",
"Regi\u00f3n de Los Lagos" = "Los Lagos",
"Regi\u00f3n de Magallanes y Antártica Chilena" = "Magallanes",
"Regi\u00f3n de los R\u00edos" = "Los R\u00edos"))
levels(nesi_individuals_with_grants_2010$REGION)
source("1_libraries.R")
source("2_load.R")
source("3_batch_load.R")
nesi_individuals_with_grants_2010$REGION <- revalue(nesi_individuals_with_grants_2010$REGION, c("Regi\u00f3n de Tarapac\u00e1" = "Tarapac\u00e1",
"Regi\u00f3n de Atacama" = "Atacama",
"Regi\u00f3n de Valparaiso" = "Valpara\u00edso",
"Regi\u00f3n del Maule" = "Maule",
"Regi\u00f3n de La Araucan\u00eda" = "Araucan\u00eda",
"Regi\u00f3n de Ais\u00e9n del Gral. Carlos Ibañez del Campo" = "Ays\u00e9n",
"Regi\u00f3n Metropolitana" = "Metropolitana",
"Regi\u00f3n de Arica y Parinacota" = "Arica y Parinacota",
"Regi\u00f3n de Antofagasta" = "Antofagasta",
"Regi\u00f3n de Coquimbo" = "Coquimbo",
"Regi\u00f3n del Libertador Gral Bernardo O'higgins" = "O\u0027Higgins",
"Región del Bio B\u00edo" = "B\u00edob\u00edo",
"Regi\u00f3n de los Lagos" = "Los Lagos",
"Regi\u00f3n de Magallanes y Antártica Chilena" = "Magallanes",
"Regi\u00f3n de los R\u00edos" = "Los R\u00edos"))
levels(nesi_individuals_with_grants_2010$REGION)
source("1_libraries.R")
source("2_load.R")
source("3_batch_load.R")
nesi_individuals_with_grants_2010$REGION <- revalue(nesi_individuals_with_grants_2010$REGION, c("Regi\u00f3n de Tarapac\u00e1" = "Tarapac\u00e1",
"Regi\u00f3n de Atacama" = "Atacama",
"Regi\u00f3n de Valparaiso" = "Valpara\u00edso",
"Regi\u00f3n del Maule" = "Maule",
"Regi\u00f3n de La Araucan\u00eda" = "Araucan\u00eda",
"Regi\u00f3n De Ais\u00e9n del Gral. Carlos Iba\u00f1ez del Campo" = "Ays\u00e9n",
"Regi\u00f3n Metropolitana" = "Metropolitana",
"Regi\u00f3n de Arica y Parinacota" = "Arica y Parinacota",
"Regi\u00f3n de Antofagasta" = "Antofagasta",
"Regi\u00f3n de Coquimbo" = "Coquimbo",
"Regi\u00f3n del Libertador Gral Bernardo O'higgins" = "O\u0027Higgins",
"Región del Bio B\u00edo" = "B\u00edob\u00edo",
"Regi\u00f3n de los Lagos" = "Los Lagos",
"Regi\u00f3n de Magallanes y Antártica Chilena" = "Magallanes",
"Regi\u00f3n de los R\u00edos" = "Los R\u00edos"))
levels(nesi_individuals_with_grants_2010$REGION)
nesi_individuals_with_grants_2011$REGION <- revalue(nesi_individuals_with_grants_2011$REGION, c("Regi\u00f3n de Tarapac\u00e1" = "Tarapac\u00e1",
"Regi\u00f3n de Atacama" = "Atacama",
"Regi\u00f3n de Valpara\u00edso" = "Valpara\u00edso",
"Regi\u00f3n del Maule" = "Maule",
"Regi\u00f3n de La Araucan\u00eda" = "Araucan\u00eda",
"Regi\u00f3n De Ais\u00e9n del Gral. Carlos Iba\u00f1ez del Campo" = "Ays\u00e9n",
"Regi\u00f3n Metropolitana" = "Metropolitana",
"Regi\u00f3n de Arica y Parinacota" = "Arica y Parinacota",
"Regi\u00f3n de Antofagasta" = "Antofagasta",
"Regi\u00f3n de Coquimbo" = "Coquimbo",
"Regi\u00f3n del Libertador Gral Bernardo O'higgins" = "O\u0027Higgins",
"Región del Bio B\u00edo" = "B\u00edob\u00edo",
"Regi\u00f3n de los Lagos" = "Los Lagos",
"Regi\u00f3n de Magallanes y Antártica Chilena" = "Magallanes",
"Regi\u00f3n de los R\u00edos" = "Los R\u00edos"))
levels(nesi_individuals_with_grants_2011$REGION)
nesi_individuals_with_grants_2012$REGION <- revalue(nesi_individuals_with_grants_2012$REGION, c("Regi\u00f3n de Tarapac\u00e1" = "Tarapac\u00e1",
"Regi\u00f3n de Atacama" = "Atacama",
"Regi\u00f3n de Valpara\u00edso" = "Valpara\u00edso",
"Regi\u00f3n del Maule" = "Maule",
"Regi\u00f3n de La Araucan\u00eda" = "Araucan\u00eda",
"Regi\u00f3n de Ays\u00e9n del Gral. Carlos Iba\u00f1ez del Campo" = "Ays\u00e9n",
"Regi\u00f3n Metropolitana" = "Metropolitana",
"Regi\u00f3n de Arica y Parinacota" = "Arica y Parinacota",
"Regi\u00f3n de Antofagasta" = "Antofagasta",
"Regi\u00f3n de Coquimbo" = "Coquimbo",
"Regi\u00f3n del Libertador Gral. Bernardo O'Higgins" = "O\u0027Higgins",
"Región del Biob\u00edo" = "B\u00edob\u00edo",
"Regi\u00f3n de Los Lagos" = "Los Lagos",
"Regi\u00f3n de Magallanes y Antártica Chilena" = "Magallanes",
"Regi\u00f3n de Los R\u00edos" = "Los R\u00edos"))
source("1_libraries.R")
source("2_load.R")
source("3_batch_load.R")
source("4_fix_region.R")
source("1_libraries.R")
source("2_load.R")
source("3_batch_load.R")
source("4_fix_region.R")
nesi_individuals_with_grants_2010$NACIONALIDAD
source("1_libraries.R")
source("2_load.R")
source("3_batch_load.R")
source("4_fix_region.R")
nesi_individuals_with_grants_2014$ING_T_P
names(nesi_individuals_with_grants_2014)
nesi_2014 <- nesi_individuals_with_grants_2014[,c("ING_T_P", "FACT_PER", "OCUP_REF", "SEXO", "REGION", "CISE")]
nesi_2014$YEAR <- 2014
nesi_2015 <- nesi_individuals_with_grants_2015[,c("ING_T_P", "FACT_PER", "OCUP_REF", "SEXO", "REGION", "CISE")]
nesi_2015$YEAR <- 2015
nesi_2013 <- nesi_individuals_with_grants_2013[,c("ING_T_P", "FACT_PER", "OCUP_REF", "SEXO", "REGION", "CISE")]
nesi_2013$YEAR <- 2013
nesi_2012 <- nesi_individuals_with_grants_2012[,c("ING_T_P", "FACT_PER", "OCUP_REF", "SEXO", "REGION", "CISE")]
nesi_2012$YEAR <- 2012
nesi_2011 <- nesi_individuals_with_grants_2011[,c("ING_T_P", "FACT_PER", "OCUP_REF", "SEXO", "REGION", "CISE")]
nesi_2011$YEAR <- 2011
nesi_2010 <- nesi_individuals_with_grants_2010[,c("ING_T_P", "FACT_PER", "OCUP_REF", "SEXO", "REGION", "CISE")]
nesi_2010$YEAR <- 2010
nesi_tidy <- cbind(nesi_2010,nesi_2011,nesi_2012,nesi_2013,nesi_2014,nesi_2015)
nesi_tidy <- rbind(nesi_2010,nesi_2011,nesi_2012,nesi_2013,nesi_2014,nesi_2015)
rm(nesi_2010,nesi_2011,nesi_2012,nesi_2013,nesi_2014,nesi_2015)
nesi_tidy$FACT_PER
aggregate(ING_T_P ~ OCUP_REF, data = subset(nesi_tidy, nesi_tidy$YEAR == 2014))
aggregate(ING_T_P ~ OCUP_REF, data = subset(nesi_tidy, nesi_tidy$YEAR == 2014), FUN = sum)
wtd.quantile(nesi_tidy$ING_T_P, weights=nesi_tidy$FACT_PER, probs=c(0, .25, .5, .75, 1),
type=c('quantile','(i-1)/(n-1)','i/(n+1)','i/n'),
normwt=FALSE, na.rm=TRUE)
library(Hmisc)
wtd.quantile(nesi_tidy$ING_T_P, weights=nesi_tidy$FACT_PER, probs=c(0, .25, .5, .75, 1),
type=c('quantile','(i-1)/(n-1)','i/(n+1)','i/n'),
normwt=FALSE, na.rm=TRUE)
wtd.quantile(nesi_individuals_with_grants_2015$ING_T_P, weights=nesi_individuals_with_grants_2015$FACT_PER, probs=c(0, .25, .5, .75, 1),
type=c('quantile','(i-1)/(n-1)','i/(n+1)','i/n'),
normwt=FALSE, na.rm=TRUE)
wtd.quantile(nesi_individuals_with_grants_2014$ING_T_P, weights=nesi_individuals_with_grants_2014$FACT_PER, probs=c(0, .25, .5, .75, 1),
type=c('quantile','(i-1)/(n-1)','i/(n+1)','i/n'),
normwt=FALSE, na.rm=TRUE)
library(survey)
install.packages("survey")
nesi_2015 <- nesi_individuals_with_grants_2015[,c("ING_T_P", "FACT_PER", "OCUP_REF", "SEXO", "REGION", "CISE")]
nesi_2015$YEAR <- 2015
nesi_2015 <- svydesign(id = ~1, data = nesi_2015, weight = ~FACT_PER)
library(survey)
nesi_2015 <- svydesign(id = ~1, data = nesi_2015, weight = ~FACT_PER)
source("1_libraries.R")
source("2_load.R")
source("3_batch_load.R")
source("4_fix_region.R")
source("1_libraries.R")
source("2_load.R")
source("3_batch_load.R")
source("4_fix_region.R")
nesi_2015 <- nesi_individuals_with_grants_2015[,c("ING_T_P", "FACT_PER", "OCUP_REF", "SEXO", "REGION", "CISE")]
nesi_2015$YEAR <- 2015
nesi_2015 <- svydesign(id = ~1, data = nesi_2015, weight = ~FACT_PER)
nesi_2014 <- nesi_individuals_with_grants_2014[,c("ING_T_P", "FACT_PER", "OCUP_REF", "SEXO", "REGION", "CISE")]
nesi_2014$YEAR <- 2014
nesi_2013 <- nesi_individuals_with_grants_2013[,c("ING_T_P", "FACT_PER", "OCUP_REF", "SEXO", "REGION", "CISE")]
nesi_2013$YEAR <- 2013
nesi_2012 <- nesi_individuals_with_grants_2012[,c("ING_T_P", "FACT_PER", "OCUP_REF", "SEXO", "REGION", "CISE")]
nesi_2012$YEAR <- 2012
nesi_2011 <- nesi_individuals_with_grants_2011[,c("ING_T_P", "FACT_PER", "OCUP_REF", "SEXO", "REGION", "CISE")]
nesi_2011$YEAR <- 2011
nesi_2010 <- nesi_individuals_with_grants_2010[,c("ING_T_P", "FACT_PER", "OCUP_REF", "SEXO", "REGION", "CISE")]
nesi_2010$YEAR <- 2010
nesi_tidy <- rbind(nesi_2010,nesi_2011,nesi_2012,nesi_2013,nesi_2014,nesi_2015)
rm(nesi_2010,nesi_2011,nesi_2012,nesi_2013,nesi_2014,nesi_2015)
source("functions/load_functions.R")
source("functions/load_functions.R")
source("functions/load_functions.R")
source("process_wages_with_weights/process_wages_with_weights_2010.R")
source("process_wages_with_weights/process_wages_with_weights_2011.R")
source("process_wages_with_weights/process_wages_with_weights_2012.R")
source("process_wages_with_weights/process_wages_with_weights_2013.R")
source("process_wages_with_weights/process_wages_with_weights_2014.R")
source("process_wages_with_weights/process_wages_with_weights_2015.R")
source("process_wages_with_weights/process_wages_with_weights_2010.R")
source("process_wages_with_weights/process_wages_with_weights_2011.R")
source("process_wages_with_weights/process_wages_with_weights_2012.R")
source("process_wages_with_weights/process_wages_with_weights_2013.R")
source("process_wages_with_weights/process_wages_with_weights_2014.R")
source("process_wages_with_weights/process_wages_with_weights_2015.R")
source("functions/load_functions.R")
nesi_2010 <- nesi_individuals_with_grants_2010[,c("ING_T_P", "FACT_PER", "OCUP_REF", "SEXO", "REGION", "CISE")]
nesi_2010$YEAR <- 2010
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("(^|[[:space:]])([[:alpha:]])", "\\1\\U\\2", x, perl=TRUE)))
nesi_2010 <- as.data.frame(lapply(nesi_2010, function (x) gsub("^\\s+|\\s+$", "", x)))
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("\xe1", "\u00e1", x))) # a with acute
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("<e1>", "\u00e1", x))) # a with acute
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("<c1>", "\u00c1", x))) # A with acute
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("\xe9", "\u00e9", x))) # e with acute
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("<e9>", "\u00e9", x))) # e with acute
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("\xed", "\u00ed", x))) # i with acute
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("<ed>", "\u00ed", x))) # i with acute
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("\xf3", "\u00f3", x))) # o with acute
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("<f3>", "\u00f3", x))) # o with acute
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("\xfa", "\u00fa", x))) # u with acute
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("<fa>", "\u00fa", x))) # u with acute
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("\xda", "\u00da", x))) # U with acute
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("<da>", "\u00da", x))) # U with acute
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("\xf1", "\u00f1", x))) # n with tilde
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("<f1>", "\u00f1", x))) # n with tilde
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("\xfc\xbe\x8c\x96\x98\xbc", "\u00f1", x))) # n with tilde
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("\xd1", "\u00d1", x))) # N with tilde
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("<d1>", "\u00d1", x))) # N with tilde
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("\xfc\xbe\x8c\x96\x90\xbc", "\u00d1", x))) # N with tilde
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("\xb4", "\u0027", x))) # apostrophe
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("<b4>", "\u0027", x))) # apostrophe
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub(" De ", " de ", x)))
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub(" Del ", " del ", x)))
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub(" La ", " la ", x)))
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub(" Los ", " los ", x)))
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub(" Y ", " y ", x)))
# Paste the relevant columns
nesi_2010 <- nesi_individuals_with_grants_2010[,c("ING_T_P", "FACT_PER", "OCUP_REF", "SEXO", "REGION", "CISE")]
nesi_2010$YEAR <- 2010
# Trim leading/ending whitespace + Fix characters/uppercase
#nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) iconv(x)))
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("(^|[[:space:]])([[:alpha:]])", "\\1\\U\\2", x, perl=TRUE)))
nesi_2010 <- as.data.frame(lapply(nesi_2010, function (x) gsub("^\\s+|\\s+$", "", x)))
# Fix characters/uppercase
nesi_2010$per_capita_income <- as.numeric(as.character(nesi_2010$per_capita_income))
nesi_2010 <- subset(nesi_2010, nesi_2010$per_capita_income > 0)
# Paste the relevant columns
nesi_2010 <- nesi_individuals_with_grants_2010[,c("ING_T_P", "FACT_PER", "OCUP_REF", "SEXO", "REGION", "CISE")]
nesi_2010$YEAR <- 2010
# Trim leading/ending whitespace + Fix characters/uppercase
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("(^|[[:space:]])([[:alpha:]])", "\\1\\U\\2", x, perl=TRUE)))
nesi_2010 <- as.data.frame(lapply(nesi_2010, function (x) gsub("^\\s+|\\s+$", "", x)))
# Keep only the people that reported their wage
nesi_2010$ING_T_P <- as.numeric(as.character(nesi_2010$ING_T_P))
nesi_2010 <- subset(nesi_2010, nesi_2010$ING_T_P > 0)
levels(nesi_2010$REGION)
# Paste the relevant columns
nesi_2010 <- nesi_individuals_with_grants_2010[,c("ING_T_P", "FACT_PER", "OCUP_REF", "SEXO", "REGION", "CISE")]
nesi_2010$YEAR <- 2010
# Trim leading/ending whitespace + Fix characters/uppercase
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("(^|[[:space:]])([[:alpha:]])", "\\1\\U\\2", x, perl=TRUE)))
nesi_2010 <- as.data.frame(lapply(nesi_2010, function (x) gsub("^\\s+|\\s+$", "", x)))
# Fix characters/uppercase
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("\xe1", "\u00e1", x))) # a with acute
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("<e1>", "\u00e1", x))) # a with acute
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("<c1>", "\u00c1", x))) # A with acute
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("\xe9", "\u00e9", x))) # e with acute
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("<e9>", "\u00e9", x))) # e with acute
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("\xed", "\u00ed", x))) # i with acute
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("<ed>", "\u00ed", x))) # i with acute
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("\xf3", "\u00f3", x))) # o with acute
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("<f3>", "\u00f3", x))) # o with acute
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("\xfa", "\u00fa", x))) # u with acute
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("<fa>", "\u00fa", x))) # u with acute
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("\xda", "\u00da", x))) # U with acute
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("<da>", "\u00da", x))) # U with acute
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("\xf1", "\u00f1", x))) # n with tilde
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("<f1>", "\u00f1", x))) # n with tilde
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("\xfc\xbe\x8c\x96\x98\xbc", "\u00f1", x))) # n with tilde
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("\xd1", "\u00d1", x))) # N with tilde
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("<d1>", "\u00d1", x))) # N with tilde
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("\xfc\xbe\x8c\x96\x90\xbc", "\u00d1", x))) # N with tilde
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("\xb4", "\u0027", x))) # apostrophe
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub("<b4>", "\u0027", x))) # apostrophe
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub(" De ", " de ", x)))
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub(" Del ", " del ", x)))
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub(" La ", " la ", x)))
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub(" Los ", " los ", x)))
nesi_2010 <- as.data.frame(lapply(nesi_2010, function(x) gsub(" Y ", " y ", x)))
# Keep only the people that reported their wage
nesi_2010$ING_T_P <- as.numeric(as.character(nesi_2010$ING_T_P))
nesi_2010 <- subset(nesi_2010, nesi_2010$ING_T_P > 0)
levels(nesi_2010$REGION)
rm(nesi_2010)
# Paste the relevant columns
nesi_individuals_with_grants_2010 <- nesi_individuals_with_grants_2010[,c("ING_T_P", "FACT_PER", "OCUP_REF", "SEXO", "REGION", "CISE")]
nesi_individuals_with_grants_2010$YEAR <- 2010
# Trim leading/ending whitespace + Fix characters/uppercase
nesi_individuals_with_grants_2010 <- as.data.frame(lapply(nesi_individuals_with_grants_2010, function(x) gsub("(^|[[:space:]])([[:alpha:]])", "\\1\\U\\2", x, perl=TRUE)))
nesi_individuals_with_grants_2010 <- as.data.frame(lapply(nesi_individuals_with_grants_2010, function (x) gsub("^\\s+|\\s+$", "", x)))
# Fix characters/uppercase
nesi_individuals_with_grants_2010 <- as.data.frame(lapply(nesi_individuals_with_grants_2010, function(x) gsub("\xe1", "\u00e1", x))) # a with acute
nesi_individuals_with_grants_2010 <- as.data.frame(lapply(nesi_individuals_with_grants_2010, function(x) gsub("<e1>", "\u00e1", x))) # a with acute
nesi_individuals_with_grants_2010 <- as.data.frame(lapply(nesi_individuals_with_grants_2010, function(x) gsub("<c1>", "\u00c1", x))) # A with acute
nesi_individuals_with_grants_2010 <- as.data.frame(lapply(nesi_individuals_with_grants_2010, function(x) gsub("\xe9", "\u00e9", x))) # e with acute
nesi_individuals_with_grants_2010 <- as.data.frame(lapply(nesi_individuals_with_grants_2010, function(x) gsub("<e9>", "\u00e9", x))) # e with acute
nesi_individuals_with_grants_2010 <- as.data.frame(lapply(nesi_individuals_with_grants_2010, function(x) gsub("\xed", "\u00ed", x))) # i with acute
nesi_individuals_with_grants_2010 <- as.data.frame(lapply(nesi_individuals_with_grants_2010, function(x) gsub("<ed>", "\u00ed", x))) # i with acute
nesi_individuals_with_grants_2010 <- as.data.frame(lapply(nesi_individuals_with_grants_2010, function(x) gsub("\xf3", "\u00f3", x))) # o with acute
nesi_individuals_with_grants_2010 <- as.data.frame(lapply(nesi_individuals_with_grants_2010, function(x) gsub("<f3>", "\u00f3", x))) # o with acute
nesi_individuals_with_grants_2010 <- as.data.frame(lapply(nesi_individuals_with_grants_2010, function(x) gsub("\xfa", "\u00fa", x))) # u with acute
nesi_individuals_with_grants_2010 <- as.data.frame(lapply(nesi_individuals_with_grants_2010, function(x) gsub("<fa>", "\u00fa", x))) # u with acute
nesi_individuals_with_grants_2010 <- as.data.frame(lapply(nesi_individuals_with_grants_2010, function(x) gsub("\xda", "\u00da", x))) # U with acute
nesi_individuals_with_grants_2010 <- as.data.frame(lapply(nesi_individuals_with_grants_2010, function(x) gsub("<da>", "\u00da", x))) # U with acute
nesi_individuals_with_grants_2010 <- as.data.frame(lapply(nesi_individuals_with_grants_2010, function(x) gsub("\xf1", "\u00f1", x))) # n with tilde
nesi_individuals_with_grants_2010 <- as.data.frame(lapply(nesi_individuals_with_grants_2010, function(x) gsub("<f1>", "\u00f1", x))) # n with tilde
nesi_individuals_with_grants_2010 <- as.data.frame(lapply(nesi_individuals_with_grants_2010, function(x) gsub("\xfc\xbe\x8c\x96\x98\xbc", "\u00f1", x))) # n with tilde
nesi_individuals_with_grants_2010 <- as.data.frame(lapply(nesi_individuals_with_grants_2010, function(x) gsub("\xd1", "\u00d1", x))) # N with tilde
nesi_individuals_with_grants_2010 <- as.data.frame(lapply(nesi_individuals_with_grants_2010, function(x) gsub("<d1>", "\u00d1", x))) # N with tilde
nesi_individuals_with_grants_2010 <- as.data.frame(lapply(nesi_individuals_with_grants_2010, function(x) gsub("\xfc\xbe\x8c\x96\x90\xbc", "\u00d1", x))) # N with tilde
nesi_individuals_with_grants_2010 <- as.data.frame(lapply(nesi_individuals_with_grants_2010, function(x) gsub("\xb4", "\u0027", x))) # apostrophe
nesi_individuals_with_grants_2010 <- as.data.frame(lapply(nesi_individuals_with_grants_2010, function(x) gsub("<b4>", "\u0027", x))) # apostrophe
nesi_individuals_with_grants_2010 <- as.data.frame(lapply(nesi_individuals_with_grants_2010, function(x) gsub(" De ", " de ", x)))
nesi_individuals_with_grants_2010 <- as.data.frame(lapply(nesi_individuals_with_grants_2010, function(x) gsub(" Del ", " del ", x)))
nesi_individuals_with_grants_2010 <- as.data.frame(lapply(nesi_individuals_with_grants_2010, function(x) gsub(" La ", " la ", x)))
nesi_individuals_with_grants_2010 <- as.data.frame(lapply(nesi_individuals_with_grants_2010, function(x) gsub(" Los ", " los ", x)))
nesi_individuals_with_grants_2010 <- as.data.frame(lapply(nesi_individuals_with_grants_2010, function(x) gsub(" Y ", " y ", x)))
# Keep only the people that reported their wage
nesi_individuals_with_grants_2010$ING_T_P <- as.numeric(as.character(nesi_individuals_with_grants_2010$ING_T_P))
nesi_individuals_with_grants_2010 <- subset(nesi_individuals_with_grants_2010, nesi_individuals_with_grants_2010$ING_T_P > 0)
levels(nesi_individuals_with_grants_2010)
str(nesi_individuals_with_grants_2010)
source("functions/load_functions.R")
# Paste the relevant columns
nesi_individuals_with_grants_2010 <- nesi_individuals_with_grants_2010[,c("ING_T_P", "FACT_PER", "OCUP_REF", "SEXO", "REGION", "CISE")]
nesi_individuals_with_grants_2010$YEAR <- 2010
# Trim leading/ending whitespace + Fix characters/uppercase
nesi_individuals_with_grants_2010 <- as.data.frame(lapply(nesi_individuals_with_grants_2010, function(x) gsub("(^|[[:space:]])([[:alpha:]])", "\\1\\U\\2", x, perl=TRUE)))
# Keep only the people that reported their wage
nesi_individuals_with_grants_2010$ING_T_P <- as.numeric(as.character(nesi_individuals_with_grants_2010$ING_T_P))
nesi_individuals_with_grants_2010 <- subset(nesi_individuals_with_grants_2010, nesi_individuals_with_grants_2010$ING_T_P > 0)
str(nesi_individuals_with_grants_2010)
